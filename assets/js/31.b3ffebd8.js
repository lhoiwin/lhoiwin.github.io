(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{366:function(e,s,t){"use strict";t.r(s);var o=t(10),r=Object(o.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"axios-出现-response-undefined-错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#axios-出现-response-undefined-错误"}},[e._v("#")]),e._v(" Axios 出现 response:undefined 错误")]),e._v(" "),t("p",[e._v("开发企业微信第三方应用的页面遇到一个很奇葩的问题。\n因为企业微信的页面有限制在企业微信内置浏览器打开。用常规的开发方式，vue + axios。用 vconsole 来调试。\n却出现一个response:undefined的错误，明明后台程序的日志显示是正常返回响应，使用 Fiddler 抓包也能看到请求响应确实是有，但是 axios 的response拦截器却报错了。\nvconsole查看也不知所云。")]),e._v(" "),t("h2",{attrs:{id:"解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[e._v("#")]),e._v(" 解决方案")]),e._v(" "),t("p",[e._v("菜鸟第一次遇到这种情况，还好找到解决方案")]),e._v(" "),t("p",[e._v("https://www.jianshu.com/p/17bc34287908")]),e._v(" "),t("blockquote",[t("p",[e._v("当我们发送一个请求到后端时，后端会先走filter层，然后是Interceptor层，再就是控制层和切面层。之所以发生401时无法获取到error.response是因为后端设置的cors允许跨域放在了切面层，验证token却在拦截器层，当我们发送一个过期的token的时候，首先会在拦截器层验证token的有效性，如果无效则返回，这时候都还没走到切面层设置的允许跨域，所以报了跨域问题，并且无法获取error.response。后端需要把允许跨域设置在filter层就OK了。")])]),e._v(" "),t("h2",{attrs:{id:"补充"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[e._v("#")]),e._v(" 补充")]),e._v(" "),t("p",[e._v("跨域这种情况，请求会正常发送返回，code，200。而移动端调试工具 vconsole 功能较弱，是显示不出这种跨域问题的，而且移动端也不方便查看错误的详细内容\n现在很多复杂的开发需求和运行环境，特别是webview的调试是十分麻烦的。")]),e._v(" "),t("blockquote",[t("p",[e._v("https://github.com/riskers/blog/issues/11 用模拟器加抓包代理基本很方便的调试移动端")])])])}),[],!1,null,null,null);s.default=r.exports}}]);